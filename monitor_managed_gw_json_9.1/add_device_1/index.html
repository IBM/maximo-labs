<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="Saravanan Krishnamoorthy" /><link rel="canonical" href="https://ibm.github.io/maximo-labs/add_device_1/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>2. Add device to Device library - Monitor Managed Gateway Lab</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../css/extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "2. Add device to Device library";
        var mkdocs_page_input_path = "add_device_1.md";
        var mkdocs_page_url = "/maximo-labs/add_device_1/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
      <script>hljs.highlightAll();</script> 
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-EGH6ZGZ8CT"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', "G-EGH6ZGZ8CT");
      </script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> Monitor Managed Gateway Lab
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="" href="../..">Get back to Maximo Labs</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Monitor Managed GW Json Lab</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="..">Welcome</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../prereqs/">Pre-Requisites</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Exercises</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../setup_simulator/">1. Setup Simulator Environment</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">2. Add device to Device library</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#1-adding-device-for-get-method">1. Adding device for GET method</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../create_gateway/">3. Create a Managed Gateway</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../deploy/">4. Deploy and verify data inflow</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../add_device_2/">5. Add Simulator-3 device</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../re-deploy/">6. Deploy and view data in a dashboard</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../release_notes/">Release Notes</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../copyright">Copyright</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">Monitor Managed Gateway Lab</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Exercises</li>
      <li class="breadcrumb-item active">2. Add device to Device library</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="objectives">Objectives</h1>
<p>In this Exercise you will learn how to add a Json-over-http device to the Device library.</p>
<hr />
<p><em>Before you begin:</em><br />
This Exercise requires that you have:</p>
<ol>
<li>completed the pre-requisites required for <a href="../prereqs/">all labs</a></li>
<li>completed the previous exercises</li>
</ol>
<hr />
<div class="admonition note">
<p class="admonition-title">New in MAS 9.1</p>
<p>You can add custom devices, such as PLCs or OPC-UA servers, or industrial devices which supports Modbus, BACnet and Json protocols that are not available in the Maximo Monitor Device library. Later the same device can be used by anyone who is creating a device on the Devices page. </br></p>
</div>
<h2 id="1-adding-device-for-get-method">1. Adding device for GET method</h2>
<p>Since Json-over-http are very customizable you will need to add a new device to the Device library instead of using a pre-configured device in the Device library by uploading the CSV file in given format.</br></p>
<ul>
<li>
<p>Navigate to the Device library page:</br>
<img alt="Navigate to Device library" src="../img/device_library_01.png" /></br></p>
</li>
<li>
<p>Modbus devices can be added using device settings in CSV file format .</br>
Click <code>Add device to library</code> and select <code>Import device settings</code> option:</br>
<img alt="Import device settings" src="../img/device_library_02.png" /></br></p>
</li>
<li>
<p>Select protocol as <code>JSON Over HTTP</code> </br>
<img alt="Import device settings" src="../img/device_library_03.png" /></br></p>
</li>
<li>
<p>Enter the device details and click <code>Next</code>:</br>
<img alt="Import device settings" src="../img/device_library_04.png" /></br></p>
</li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<ul>
<li>New manufacutrer can be added if you couldn't find it in the option.</li>
<li>XX in the Device name should be your initials in case other people are following this lab in the same Maximo Application Suite environment.</li>
</ul>
</div>
<ul>
<li>
<p>Download <code>example.xlsx file</code></br>
<img alt="Import device settings" src="../img/device_library_05.png" /></br></p>
</li>
<li>
<p>Open Excel file to fill the data points in <code>metrics</code> sheet, Each column in the template, offering context on its purpose and instructions for completing the corresponding cell values. It is important to note that each row in the CSV represents a single json-over-http datapoint.
<img alt="Import device settings" src="../img/device_library_06.png" /></br></p>
</li>
</ul>
<h1 id="examples-of-input-for-csv-template">Examples of input for csv template</h1>
<table>
<thead>
<tr>
<th>Column_Name&emsp;&emsp;&emsp;&emsp;&emsp;</th>
<th>Description&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;</th>
</tr>
</thead>
<tbody>
<tr>
<td><i>Payload</i></td>
<td>RSpecifies the JSON body required for POST API calls to retrieve the desired datapoint. This payload consists of key-value pairs representing standard JSON data types (objects, arrays, strings, numbers, booleans, null). This field is applicable only when the HTTP method is set to POST.</td>
</tr>
<tr>
<td><i>Name</i></td>
<td>The name of the data point should be added in this column. The value will be used in Monitor as the related metric name. <code>Actual Torque</code></td>
</tr>
<tr>
<td><i>Type</i></td>
<td>Indicates the data type of the datapoint, enabling the EDC tool to correctly interpret incoming values. Supported types include: <code>float</code>,<code>string</code> and <code>bool</code>. <code>float:</code> Numeric values with decimal points (e.g., voltage readings: 254.5698).</br> <code>string:</code> Alphanumeric values (e.g., model name, firmware version: “V52.1.4”). </br> <code>bool:</code> Coil addresses represent Boolean values, storing simple binary data (0 or 1).</td>
</tr>
<tr>
<td><i>Unit</i></td>
<td>This column indicates the unit in which the data is reported for a specific datapoint. This is an optional parameter as not all datapoints require a unit.</td>
</tr>
<tr>
<td><i>Method</i></td>
<td>Specifies the HTTP method used to interact with the API. GET and POST are the only acceptable values. </br> <code>GET</code> Retrieves records from the server. </br> <code>POST</code> Sends data to create a new record on the server.</td>
</tr>
<tr>
<td><i>Endpoint</i></td>
<td>Refers to the API URL that acts as the access point for retrieving or sending data. This is appended to the base URL to define the target resource. e.g: <code>/device-1</code></td>
</tr>
<tr>
<td><i>Response_Path</i></td>
<td>Specifies the path used to extract the required value from the API response payload. Use a JMESPath expression to navigate the JSON structure. For more information on syntax and examples., please refer to <a href="https://jmespath.org/">Jmespath.org</a></td>
</tr>
</tbody>
</table>
<ul>
<li>Copy the json payload from the browser
<img alt="Import device settings" src="../img/device_library_07.png" /></br></li>
<li>The response path expression for the Json-over-http datapoint can be evaluated in <a href="https://jmespath.org/">JMESPath</a> </li>
<li>
<p>Paste the payload in <code>JSON data</code> and Enter an expression in the search box to see JMESPath in action and see the result in result pane
<img alt="Import device settings" src="../img/device_library_08.png" /></br>
<img alt="Import device settings" src="../img/device_library_09.png" /></br>
<img alt="Import device settings" src="../img/device_library_10.png" /></br></p>
</li>
<li>
<p>Fill the <code>Metrics</code> sheet using the details:
<img alt="Import device settings" src="../img/device_library_11.png" /></br></p>
</li>
<li>
<p>For filling the <code>metrics</code> sheet, you can refer <code>Sample Metrics Format</code>sheet.
<img alt="Import device settings" src="../img/device_library_12.png" /></br></p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Once the required datapoint details is filled to the Metrics sheet, kindly save the Metrics sheet to CSV format for uploading.  </br></p>
</div>
<p><img alt="Import device settings" src="../img/device_library_13.png" /></br></p>
<ul>
<li>
<p>Upload the CSV file and select <code>Next</code>
<img alt="Import device settings" src="../img/device_library_14.png" /></br></p>
</li>
<li>
<p>You can see the summary of datapoints, if required you can remove the metrics here. Once done click <code>Finish</code>:</br>
<img alt="Import device settings" src="../img/device_library_15.png" /></br></p>
</li>
</ul>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>If you see a <code>Bad Request</code> error while Uploading the CSV file, </br>
then you might need to check the CSV file for each metrics which you might be missing details or it maybe in a invalid format.</p>
</div>
<ul>
<li>You can see the newly added device in Device library:</br>
<img alt="Import device settings" src="../img/device_library_16.png" /></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If new Manufacturer is created, it will be appended along with the OrganizationID. <code>IBM - Main</code> </br>
e.g - If the the OrganizationID is <code>MASPROD</code> then the manfucturer will be <code>XXXXX - MASPROD</code>  </br></p>
</div>
<p>Now the device is ready to use. Enjoy!!! 🤗.</br></p>
<h2 id="2-adding-device-for-post-method">2. Adding device for POST method</h2>
<ul>
<li>
<p>Open Excel file to fill the data points in <code>metrics</code> sheet, Each column in the template, offering context on its purpose and instructions for completing the corresponding cell values. It is important to note that each row in the CSV represents a single json-over-http datapoint.
<img alt="Import device settings" src="../img/device_library_06.png" /></br></p>
</li>
<li>
<p>To get the response payload use the <code>curl</code> command</p>
</li>
</ul>
<pre><code class="language-json">curl -X POST -d &quot;['Temperature','Voltage L1-L2','Device-Name','Working','Active Alarms']&quot; http://localhost:8080/device-3
</code></pre>
<p><img alt="Import device settings" src="../img/post_device_library_01.png" /></br></p>
<ul>
<li>The response path expression for the Json-over-http datapoint can be evaluated in <a href="https://jmespath.org/">JMESPath</a></li>
<li>Copy the respose from the terminal or command window</li>
<li>
<p>Paste the payload in <code>JSON data</code> and Enter an expression in the search box to see JMESPath in action and see the result in result pane. 
<img alt="Import device settings" src="../img/post_device_library_02.png" /></br>
<img alt="Import device settings" src="../img/post_device_library_03.png" /></br>
<img alt="Import device settings" src="../img/post_device_library_04.png" /></br></p>
</li>
<li>
<p>Fill the <code>Metrics</code> sheet using the details:
<img alt="Import device settings" src="../img/post_device_library_05.png" /></br></p>
</li>
<li>
<p>Save the Metrics Excel file to CSV and create new device in the Device library, by following the previous step.
<img alt="Import device settings" src="../img/post_device_library_06.png" /></br></p>
</li>
</ul>
<p>Now the device is ready to use for Managed Gateway. Enjoy!!! 🤗</p>
<hr />
<p>Congratulations you have successfully added a device to the Device library.</br></p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../setup_simulator/" class="btn btn-neutral float-left" title="1. Setup Simulator Environment"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../create_gateway/" class="btn btn-neutral float-right" title="3. Create a Managed Gateway">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../setup_simulator/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../create_gateway/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../../js/popper.min.js"></script>
      <script src="../../js/tippy-bundle.umd.js"></script>
      <script src="../../js/clipboard.js"></script>
      <script src="../../js/extra.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
